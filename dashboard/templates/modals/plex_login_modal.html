<!-- Plex Login Modal -->
<div class="modal fade" id="plexLoginModal" tabindex="-1" aria-labelledby="plexLoginModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="plexLoginModalLabel">Link Plex Account</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p class="text-muted" id="plex-modal-description">Enter your Plex server URL and Plex.tv credentials. This is a one-time login to retrieve an authentication token. Your password is not stored.</p>
                <div class="mb-3">
                    <label for="plex-modal-url" class="form-label">Plex Server URL</label>
                    <input type="text" class="form-control" id="plex-modal-url" placeholder="http://192.168.1.100:32400">
                    <div class="form-text">Example: http://plex:32400 or https://plex.example.com:32400</div>
                </div>
                
                <!-- Toggle between login methods -->
                <div class="mb-3">
                    <div class="btn-group btn-group-sm w-100" role="group">
                        <input type="radio" class="btn-check" name="plex-auth-method" id="plex-auth-credentials" value="credentials" checked autocomplete="off">
                        <label class="btn btn-outline-primary" for="plex-auth-credentials"><span class="mdi mdi-login"></span> Login with Credentials</label>
                        
                        <input type="radio" class="btn-check" name="plex-auth-method" id="plex-auth-token" value="token" autocomplete="off">
                        <label class="btn btn-outline-primary" for="plex-auth-token"><span class="mdi mdi-key"></span> Use Existing Token</label>
                    </div>
                </div>
                
                <!-- Credentials input (shown by default) -->
                <div id="plex-credentials-group">
                    <div class="mb-3">
                        <label for="plex-username" class="form-label">Plex Username</label>
                        <input type="text" class="form-control" id="plex-username" autocomplete="username">
                    </div>
                    <div class="mb-3">
                        <label for="plex-password" class="form-label">Plex Password</label>
                        <input type="password" class="form-control" id="plex-password" autocomplete="current-password">
                    </div>
                </div>
                
                <!-- Token input (hidden by default) -->
                <div id="plex-token-group" style="display: none;">
                    <div class="mb-3">
                        <label for="plex-token-input" class="form-label">Plex Authentication Token</label>
                        <input type="text" class="form-control" id="plex-token-input" placeholder="Enter your Plex token">
                        <div class="form-text">You can find your token in Plex Web App → Settings → Account → Authorized Devices, or from the X-Plex-Token parameter in Plex URLs.</div>
                    </div>
                </div>
                
                <div id="plex-login-status" class="mt-3"></div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline-danger" id="plex-modal-unlink-btn" style="display: none;"><span class="mdi mdi-link-off"></span> Unlink</button>
                <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal"><span class="mdi mdi-close"></span> Close</button>
                <button type="button" class="btn btn-outline-info" id="plex-test-connection-btn"><span class="mdi mdi-network"></span> Test Connection</button>
                <button type="button" class="btn btn-outline-primary" id="plex-signin-btn"><span class="mdi mdi-login"></span> Sign In</button>
                <button type="button" class="btn btn-outline-primary" id="plex-save-token-btn" style="display: none;"><span class="mdi mdi-content-save"></span> Save Token</button>
                <button type="button" class="btn btn-outline-primary" id="plex-update-btn" style="display: none;"><span class="mdi mdi-content-save"></span> Save URL</button>
            </div>
        </div>
    </div>
</div>
